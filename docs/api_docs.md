# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è REST API –¥–ª—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è

## üîπ –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã:** –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ REST API —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ñ–µ—Ä–µ–Ω—Å –∏ –æ–Ω–ª–∞–π–Ω-–¥–æ–æ–±—É—á–µ–Ω–∏–µ —á–µ—Ç—ã—Ä–µ—Ö —Ç–∏–ø–æ–≤ ML-–º–æ–¥–µ–ª–µ–π –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∑–∞–¥–∞—á–∏:**
- –¢–∞–±–ª–∏—á–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è AQI (CatBoost + MLPRegressor) ‚Äî –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–∑–¥—É—Ö–∞
- –ê—É–¥–∏–æ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (MFCC + CatBoostClassifier) ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∑–≤—É–∫–æ–≤ –∂–∏–≤–æ—Ç–Ω—ã—Ö  
- –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (ResNet18) ‚Äî –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—Ä—É–∫—Ç–æ–≤
- –ì–µ–æ—Ä–µ–≥—Ä–µ—Å—Å–∏—è (joblib.Regressor) ‚Äî –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:** FastAPI, PyTorch, CatBoost, scikit-learn, librosa  
**–ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞:** 8002  
**–ê–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:8002/docs (Swagger UI + ReDoc)

## üîπ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [üîπ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [üîπ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
3. [üîπ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-—Å–∏—Å—Ç–µ–º—ã)
4. [üîπ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
5. [üîπ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è API](#—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è-api)
6. [üîπ –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π](#–æ–ø–∏—Å–∞–Ω–∏–µ-–º–æ–¥–µ–ª–µ–π)
7. [üîπ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
8. [üîπ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π)
9. [üîπ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)

## üîπ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
```
Python                 3.10+ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 3.11 –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
FastAPI                0.115+ (ASGI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫)
Uvicorn                0.30+ (ASGI —Å–µ—Ä–≤–µ—Ä)
PyTorch                2.0+ (–≥–ª—É–±–æ–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ)
CatBoost               1.2+ (–≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±—É—Å—Ç–∏–Ω–≥)
```

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
```
fastapi==0.115.0           # API —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å –∞–≤—Ç–æ–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
uvicorn[standard]==0.30.1  # –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π ASGI —Å–µ—Ä–≤–µ—Ä
torch>=2.0.0               # PyTorch –¥–ª—è –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π
torchvision>=0.15.0        # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
catboost>=1.2.0            # –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±—É—Å—Ç–∏–Ω–≥
scikit-learn>=1.3.0        # MLPRegressor –∏ —É—Ç–∏–ª–∏—Ç—ã
librosa>=0.10.0            # –ê—É–¥–∏–æ–æ–±—Ä–∞–±–æ—Ç–∫–∞ (MFCC)
pandas>=2.0.0              # –†–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
pillow>=10.0.0             # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π JPG
joblib>=1.3.0              # –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–µ–π
soundfile>=0.12.0          # –ß—Ç–µ–Ω–∏–µ WAV —Ñ–∞–π–ª–æ–≤
```

## üîπ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
git clone <repository_url>
cd <project_directory>
```
*–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.*

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
```bash
# Linux/macOS
python -m venv venv
source venv/bin/activate

# Windows
python -m venv venv
venv\Scripts\activate
```
*–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏–∑–æ–ª–∏—Ä—É–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ Python.*

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```
*–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞ 2-5 –º–∏–Ω—É—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.*

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ñ–∞–π–ª–æ–≤
```
audio_models/           ‚úÖ scaler.pkl, audio_model.pkl, encoder.pkl
image_models/           ‚úÖ fruit_model.pth (ResNet18)
table_models/           ‚úÖ catboost_model_regression.cbm, nn_model_regression.pkl
geo_models/             ‚úÖ geo_model.pkl
```
*–ü—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã API.*

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º)
uvicorn api:app --host 0.0.0.0 --port 8002 --reload

# –†–µ–∂–∏–º –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (–º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–π)
uvicorn api:app --host 0.0.0.0 --port 8002 --workers 4
```

**–î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º:**
- –û—Å–Ω–æ–≤–Ω–æ–π API: http://localhost:8002
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8002/docs  
- –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8002/redoc

## üîπ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      HTTP –ö–ª–∏–µ–Ω—Ç    ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ    FastAPI —Å–µ—Ä–≤–µ—Ä    ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ    ML –ú–æ–¥—É–ª–∏     ‚îÇ
‚îÇ   (curl/Postman)    ‚îÇ    ‚îÇ     api.py:8002      ‚îÇ    ‚îÇ (audio/image/...)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                         ‚îÇ
                                                 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                 ‚îÇ   –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö  ‚îÇ
                                                 ‚îÇ  (.pkl/.cbm/.pth)‚îÇ
                                                 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞
```
1. –í–∞–ª–∏–¥–∞—Ü–∏—è (Pydantic) ‚Üí 2. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è ‚Üí 3. ML-–º–æ–¥—É–ª—å
     ‚Üì                           ‚Üì                      ‚Üì
4. –ò–Ω—Ñ–µ—Ä–µ–Ω—Å/–î–æ–æ–±—É—á–µ–Ω–∏–µ ‚Üí 5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚Üí 6. JSON-–æ—Ç–≤–µ—Ç
```
*–°–∏—Å—Ç–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –ø–æ —Ç–∏–ø—É –∑–∞–¥–∞—á–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ JSON-–æ—Ç–≤–µ—Ç–∞.*

## üîπ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
üìÅ .
‚îú‚îÄ‚îÄ api.py                      # –û—Å–Ω–æ–≤–Ω–æ–π FastAPI —Å–µ—Ä–≤–µ—Ä (9 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
‚îú‚îÄ‚îÄ audio.py                    # MFCC –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ + CatBoostClassifier
‚îú‚îÄ‚îÄ geo.py                      # GeoRegressor (joblib)
‚îú‚îÄ‚îÄ image.py                    # ResNet18 + PyTorch –∏–Ω—Ñ–µ—Ä–µ–Ω—Å
‚îú‚îÄ‚îÄ tables.py                   # CatBoost + MLPRegressor (AQI)
‚îú‚îÄ‚îÄ test_api.py                 # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python

üìÅ audio_models/                   # –ê—É–¥–∏–æ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ scaler.pkl               # –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è MFCC –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ encoder.pkl              # –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ audio_model.pkl          # –û–±—É—á–µ–Ω–Ω–∞—è CatBoost –º–æ–¥–µ–ª—å
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ cats_dogs/            # –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

üìÅ image_models/                   # –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ fruit_model.pth          # ResNet18 –≤–µ—Å–∞ (PyTorch)
‚îÇ   ‚îî‚îÄ‚îÄ üìÅ data_fruits/          # –ü—Ä–∏–º–µ—Ä—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

üìÅ table_models/                   # –¢–∞–±–ª–∏—á–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è AQI
‚îÇ   ‚îú‚îÄ‚îÄ catboost_model_regression.cbm  # –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±—É—Å—Ç–∏–Ω–≥
‚îÇ   ‚îî‚îÄ‚îÄ nn_model_regression.pkl        # –ù–µ–π—Ä–æ—Å–µ—Ç—å MLP

üìÅ geo_models/                     # –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ geo_model.pkl             # –°–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å
```

## üîπ –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è API

### –û–±—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| –ë–∞–∑–æ–≤—ã–π URL | http://localhost:8002 |
| –§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ | JSON, multipart/form-data |
| –ö–æ–¥–∏—Ä–æ–≤–∫–∞ | UTF-8 |
| –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ | 9 |
| –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ | 10MB |

### –¢–∞–±–ª–∏—Ü–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–µ—Ä–∞—Ü–∏—è | –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ | –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ |
|-------|----------|----------|----------------|-----------------|
| `GET` | `/` | Health Check | - | JSON —Å—Ç–∞—Ç—É—Å |
| `GET` | `/table_inference` | –ò–Ω—Ñ–µ—Ä–µ–Ω—Å AQI | 6x float (CO,NO2,SO2,O3,PM25,PM10) | 2x –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è (CatBoost+NN) |
| `POST` | `/finetuning_table_single` | –î–æ–æ–±—É—á–µ–Ω–∏–µ | JSON (7x float + target) | –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ |
| `POST` | `/finetuning_table_batch` | –î–æ–æ–±—É—á–µ–Ω–∏–µ –±–∞—Ç—á–µ–º | CSV —Ñ–∞–π–ª | –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ |
| `POST` | `/audio_inference` | –ò–Ω—Ñ–µ—Ä–µ–Ω—Å –∞—É–¥–∏–æ | WAV —Ñ–∞–π–ª | –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å |
| `POST` | `/finetuning_audio` | –î–æ–æ–±—É—á–µ–Ω–∏–µ –∞—É–¥–∏–æ | WAV+label | –ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| `POST` | `/image_inference` | –ò–Ω—Ñ–µ—Ä–µ–Ω—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | JPG/PNG —Ñ–∞–π–ª | –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–π –∫–ª–∞—Å—Å |
| `POST` | `/finetuning_image` | –î–æ–æ–±—É—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | JPG+label | –ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| `GET` | `/geo_inference` | –ì–µ–æ—Ä–µ–≥—Ä–µ—Å—Å–∏—è | 5x float (Amz2,H2,D2,Skal2,Tur1h2) | –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ |

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

#### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
```bash
curl -X GET "http://localhost:8002/"
```
```json
{"message": "It works!", "status": "healthy"}
```

#### 2. –¢–∞–±–ª–∏—á–Ω—ã–π –∏–Ω—Ñ–µ—Ä–µ–Ω—Å AQI
```bash
curl "http://localhost:8002/table_inference?CO=300.3&NO2=20.5&SO2=3.1&O3=32.2&PM25=15.0&PM10=16.6"
```
```json
{"catboost": 75.123, "neuralnet": 78.456}
```

#### 3. –î–æ–æ–±—É—á–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (–æ–¥–∏–Ω–æ—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä)
```bash
curl -X POST "http://localhost:8002/finetuning_table_single" \
  -H "Content-Type: application/json" \
  -d '{"CO":330.3,"NO2":20.5,"SO2":3.1,"O3":32.2,"PM25":15.0,"PM10":16.6,"AQI":80}'
```
```json
{"r2_score": 0.92, "rmse": 6.2}
```

#### 4. –ê—É–¥–∏–æ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
```bash
curl -X POST "http://localhost:8002/audio_inference" -F "file=@dog.wav"
```
```json
{"label": "dog", "confidence": 0.94}
```

#### 5. –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```bash
curl -X POST "http://localhost:8002/image_inference" -F "file=@banana.jpg"
```
```json
{"label": "banana", "confidence": 0.91}
```

## üîπ –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

### –¢–∞–±–ª–∏—á–Ω–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è AQI
| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------------|----------|
| –í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã | CO, NO2, SO2, O3, PM2.5, PM10 (6 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤) |
| –¶–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è | AQI (–∏–Ω–¥–µ–∫—Å –∫–∞—á–µ—Å—Ç–≤–∞ –≤–æ–∑–¥—É—Ö–∞) |
| –ú–æ–¥–µ–ª–∏ | CatBoostRegressor, MLPRegressor (scikit-learn) |
| –ö–∞—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–∏ | R¬≤=0.91, RMSE=6.9 |

### –ê—É–¥–∏–æ–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------------|----------|
| –ü—Ä–∏–∑–Ω–∞–∫–∏ | MFCC(30) + delta + delta-delta (90 –ø—Ä–∏–∑–Ω–∞–∫–æ–≤) |
| –ö–ª–∞—Å—Å—ã | cat, dog (–±–∏–Ω–∞—Ä–Ω–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ) |
| –ú–æ–¥–µ–ª—å | CatBoostClassifier |
| –ú–µ—Ç—Ä–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ | Accuracy=94.2% –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –Ω–∞–±–æ—Ä–µ |

### –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------------|----------|
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | ResNet18 (PyTorch, –ø—Ä–µ–¥–æ–±—É—á–µ–Ω–Ω–∞—è –Ω–∞ ImageNet) |
| –ö–ª–∞—Å—Å—ã | –§—Ä—É–∫—Ç—ã (apple, banana, orange, pear ‚Äî –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ) |
| –†–∞–∑–º–µ—Ä –≤—Ö–æ–¥–∞ | 224x224 RGB |
| –ú–µ—Ç—Ä–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ | F1-macro=0.91 |

### –ì–µ–æ—Ä–µ–≥—Ä–µ—Å—Å–∏—è
| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------------|----------|
| –í—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã | Amz2, H2, D2, Skal2, Tur1h2 (5 –≥–µ–æ–ø—Ä–∏–∑–Ω–∞–∫–æ–≤) |
| –ú–æ–¥–µ–ª—å | joblib.Regressor (—Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ RandomForestRegressor) |
| –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ | –ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ |

## üîπ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
python test_api.py
```
*–í—ã–ø–æ–ª–Ω—è–µ—Ç 8 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–æ –≤—Å–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–æ–≤ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤.*

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Swagger UI)
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8002/docs –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –∏–∑ —Å–ø–∏—Å–∫–∞
3. –ù–∞–∂–º–∏—Ç–µ "Try it out" ‚Üí –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ‚Üí "Execute"
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∫–æ–¥ —Å—Ç–∞—Ç—É—Å–∞

## üîπ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π

| –û—à–∏–±–∫–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ |
|--------|---------|---------|
| `Address already in use` | –ü–æ—Ä—Ç 8002 –∑–∞–Ω—è—Ç | `lsof -ti:8002 | xargs kill -9` (Linux/macOS) |
| `No module 'librosa'` | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∞—É–¥–∏–æ–±–∏–±–ª–∏–æ—Ç–µ–∫–∞ | `pip install librosa soundfile` |
| `CUDA out of memory` | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ GPU –ø–∞–º—è—Ç–∏ | –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ CPU –∏–ª–∏ `torch.cuda.empty_cache()` |
| `Model file not found` | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ñ–∞–π–ª—ã –º–æ–¥–µ–ª–µ–π | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ `*_models/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö |
| `Invalid file format` | –ù–µ–ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∏–ø —Ñ–∞–π–ª–∞ | –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WAV (–∞—É–¥–∏–æ), JPG/PNG (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è), CSV (—Ç–∞–±–ª–∏—Ü—ã) |

## üîπ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
```dockerfile
FROM python:3.10-slim

WORKDIR /app
COPY . /app
RUN pip install --no-cache-dir -r requirements.txt

EXPOSE 8002
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD curl -f http://localhost:8002/ || exit 1

CMD ["uvicorn", "api:app", "--host", "0.0.0.0", "--port", "8002", "--workers", "4"]
```

### Gunicorn + Uvicorn (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
```bash
pip install gunicorn
gunicorn api:app -w 4 -k uvicorn.workers.UvicornWorker --bind 0.0.0.0:8002 --timeout 120
```
